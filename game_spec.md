游戏设计文档: 拼拼中国 (PinPin China)
(暂定名，强调拼图的动作)

1. 游戏概览 (Overview)
平台: Web (HTML5/Canvas)，完美适配移动端触摸和桌面端鼠标。

核心类型: 教育/休闲解压/反应类。

目标受众: 全年龄段（特别是地理爱好者、学生、休闲玩家）。

核心体验: 极致的“ASMR”拼图吸附手感 + 紧张刺激的反应消除。

2. 美术与音效风格 (Visual & Audio)
2.1 美术风格：Q版微缩模型 (Cute & Miniature)
整体色调: 柔和明亮的高饱和度糖果色（马卡龙色系），避免教科书式的枯燥配色。

省份形象:

拟人化: 每个省份拼图块都有一个小表情（一双大眼睛）。被拖动时眼睛会看向手指方向；闲置时会眨眼。

质感: 不做扁平纸片，要做成有厚度的“软胶”或“饼干”质感（带一点侧面阴影和高光）。

UI设计: 圆润的大按钮，果冻风格。

2.2 音效设计：ASMR 风格 (关键点)
抓取: 类似于拔出吸盘的 “啵 (Pop)” 声。

悬停: 当拼图靠近正确位置时，会有轻微的 “嗡嗡” 磁力共振音效。

吸附 (Snapping): 这是灵魂。需要一种清脆、短促且带有回响的 “咔哒 (Click/Thwack)” 声，类似于乐高积木完美契合的声音，或者机械键盘轴体的声音。

消除 (关卡2): 气泡破裂声或风铃声。

3. 关卡详细设计 (Level Design)
第一关：磁力拼图 (Magnetic Map)
目标: 将散落的省份拼块复原到中国地图轮廓中。

流程与机制：
分批次生成: 中国有34个省级行政区，一次性全部堆在屏幕上太乱。

设计: 屏幕中间是带浅灰色底纹的中国地图凹槽。屏幕下方或周围分批次刷出拼图块（例如每次出5-6个，按区域划分，如先出“东北三省+内蒙”）。

拖拽与判定:

玩家拖动拼图块。

拼图块有轻微的物理惯性（拖动停止后会有一点点缓冲）。

磁力吸附系统 (The Snapping System):

触发范围: 当拼图块中心点距离正确凹槽中心点 < 50px (可调整) 时，触发“磁力场”。

视觉提示: 正确的凹槽边缘高亮发光（白色或金色呼吸光）。

释放效果: 只要在磁力范围内松手，拼图块瞬间以非线性动画（如 Back.easeOut 弹性动画）飞入凹槽。

反馈 (Juice):

拼图块嵌入时，地图轻微抖动一下。

播放清脆的 “咔哒” 声。

拼图块边缘飞出微小的粒子特效（星星或彩带）。

完成: 所有省份拼完后，地图闪耀金光，视祝贺文字弹出，转场进入第二关。

第二关：挑战模式 (Hard Mode)
目标: 依靠形状记忆还原地图（无省界线提示）。

流程与机制：
难度升级:
只有中国外轮廓，中间无省份线条。
没有悬停高亮提示。
拖拽时没有颜色变化提示。
吸附判定更加严格（需要非常精准）。
标签隐藏：仅显示直辖市与港澳，拼对后才显示其他省名。

第三关：省会雨 (Capital Rain)
目标: 在落地前消除匹配的“省份形状”和“省会名称”。

流程与机制：
转场: 第一关拼好的完整地图向上漂浮，变为半透明背景（或作为顶部装饰）。

掉落机制:

屏幕上方随机掉落两类方块：

A类: 第一关用过的省份形状（保持Q版风格）。

B类: 写着省会城市名字的矩形方块（如“广州”、“成都”、“武汉”）。

掉落速度随时间逐渐加快。

消除玩法 (Tap & Match):

玩家需要先点击一个物体（比如点击了“广东省”的形状，该形状变色选中）。

然后在屏幕上寻找对应的省会（“广州”），点击它。

判定:

匹配成功: 两个方块在空中相吸碰撞，变成金币消失，播放 “Ding!” 音效。

匹配失败: 播放 “Buzz” 错误音效，方块轻微震动，取消选中状态。

失败条件:

如果有方块触底，底部的警戒线（红线）会上涨。

积累5个方块触底未消除，游戏结束。

4. 技术实现难点与方案 (Technical Spec)
4.1 开发栈推荐
引擎: Phaser 3 (最成熟的H5游戏引擎，处理Sprite、物理和动画非常顺手)。

物理: Arcade Physics (轻量级) 或 Matter.js (如果想要更真实的碰撞堆叠)。

4.2 核心算法逻辑
A. 地图数据处理 (SVG to Polygon)
素材源: 必须使用标准的中国地图矢量数据（SVG）。

转换: 在游戏初始化时，将SVG路径转换为游戏内的 Polygon (多边形碰撞体)。

注意: 许多省份（如山东、辽宁）边缘很碎，需要做 Simplify (多边形简化) 处理，减少顶点数量，否则性能会差，且判定过于严格。

凹槽匹配: 实际上不需要检测形状边缘是否完美重合，只需要检测 Center Point (质心) 的距离。

Distance(HeldPiece.x, HeldPiece.y, Slot.x, Slot.y) < Threshold

B. 磁力吸附动画 (Snapping Animation)
不要直接设置 x, y，要用 Tween 动画。

JavaScript

// 伪代码示例 (Phaser 3)
if (distance < SNAP_THRESHOLD) {
    this.tweens.add({
        targets: puzzlePiece,
        x: targetSlot.x,
        y: targetSlot.y,
        scaleX: 1.05, // 先放大一点
        scaleY: 0.95, // 压扁一点（果冻感）
        duration: 150,
        ease: 'Back.easeOut', // 关键：回弹效果
        onComplete: () => {
             // 恢复原状
             puzzlePiece.setScale(1);
             playSnapSound(); // 播放ASMR音效
             spawnParticles(); // 播放粒子
        }
    });
}
C. 掉落生成逻辑 (Level 3)
为了保证游戏可玩性，不能完全随机。

成对池 (Pair Pool): 系统内部维护一个池子。如果生成了“江苏省”，那么接下来的5秒内，必须生成“南京”的方块，否则玩家无法消除，会导致必死局面。